<% subject_id = SecureRandom.hex %>

<%= render(Primer::OpenProject::SelectTreePanel.new(
  data: { interaction_subject: subject_id },
  select_variant: :multiple,
  fetch_strategy: :local,
  open_on_load: open_on_load
)) do |panel| %>
  <% panel.with_show_button { "Choose item" } %>

  <%# panel.with_filter_mode(name: "teacher", label: "Teacher") %>
  <%# panel.with_filter_mode(name: "all", label: "All", selected: true) %>

  <% panel.with_sub_tree(label: "Students", expanded: expanded) do |hogwarts| %>
    <% hogwarts.with_sub_tree(label: "Ravenclaw", expanded: expanded) do |ravenclaw| %>
      <% ravenclaw.with_leaf(label: "Luna Lovegood") %>
    <% end %>

    <% hogwarts.with_sub_tree(label: "Slytherin", expanded: expanded) do |hufflepuff| %>
      <% hufflepuff.with_leaf(label: "Draco Malfoy") %>
    <% end %>

    <% hogwarts.with_sub_tree(label: "Hufflepuff", expanded: expanded) do |hufflepuff| %>
      <% hufflepuff.with_leaf(label: "Susan Bones") %>
    <% end %>

    <% hogwarts.with_sub_tree(label: "Gryffindor", expanded: expanded) do |hufflepuff| %>
      <% hufflepuff.with_leaf(label: "Harry Potter") %>
      <% hufflepuff.with_leaf(label: "Ronald Weasley") %>
      <% hufflepuff.with_leaf(label: "Hermione Granger") %>
    <% end %>
  <% end %>

  <% panel.with_sub_tree(label: "Disabled", disabled: true, item_id: :disabled) %>

  <% panel.with_leaf(label: "Albus Dumbledore") %>
  <% panel.with_leaf(label: "Minerva McGonagall") %>
  <% panel.with_leaf(label: "Severus Snape") %>
  <% panel.with_leaf(label: "Rubeus Hagrid") %>
<% end %>

<%= render partial: "primer/alpha/select_panel_preview/interaction_subject_js", locals: { subject_id: subject_id } %>
